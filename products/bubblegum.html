<!-- Bubblegum product page
  Frontend worked on by: by Rayyan Akhlaq - 230074804
  Form for adding to basket added by Safa Riasat - 230078145
  Review Frontend by Hanna Appiah - 230089015
  Review Backend by Eamon Mooney - 230075926
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>G-TECH50 | BUBBLEGUM BLASTER</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="../css/products.css">
  <link rel="stylesheet" href="../css/footer.css">
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/navbarfix.css">
  <!-- Link to basketnumber JavaScript file -->
  <script src="../js/basketNumber.js"></script>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../images/Externalmade/favicon.png">

</head>

<body>


  <!-- NAV BAR FOR PRODUCT PAGES -->
  <div class="navbar">
    <div class="logo">
      <img src="../images/gtechlogonew.png" alt="G-Tech 50 Logo" class="logo-image">
    </div>


    <div class="nav-links">
      <a href="../index.html">Home</a>

      <div class="dropdown">
        <a href=#>Categories</a>

        <div class="dropdown-content">
          <a href="../categories/Mice.html">Mice</a>
          <a href="../categories/Monitors.html">Monitors</a>
          <a href="../categories/Headphones.html">Headphones</a>
          <a href="../categories/Keyboards.html">Keyboards</a>
          <a href="../categories/Mousepads.html">Mousepads</a>
        </div>

      </div>
      <a href="../aboutus.html">About Us</a>
      <a href="../contact.html">Contact Us</a>
      <a href="membershipSignUp.html">G-TECH50+</a>
    </div>


    <div class="icon-container">
      <div class="search-bar">
        <input type="text" id="searchBar" placeholder="Search...">
        <i class="material-icons" id="searchButton">search</i>
      </div>

      <a href="../profile.html"><i class="material-icons">account_circle</i></a>
      <!-- Basket Section in navbar -->
      <a href="../basket.html" id="basket-container">
        <!-- Basket Icon -->
        <i class="material-icons">shopping_basket</i>
        <!-- Basket Number - changes to that with the javascript calling php -->
        <span id="basketNum"></span>
      </a>
    </div>
  </div>

  <div id="searchResults" class="search-results" style="display: none;"></div>

  <!-- Linking to Search bar JS -->
  <script src="../js/searchBar.js"></script>


  <div class="single-item">
    <div class="Picture">
      <img class="main-image" src="../images/Ai/bubblegum0001.png" alt="Mouse">
    </div>
    <div class="item-spec">
        <h2>BUBBLEGUM BLASTER</h2>
        <p id="averageRating"></p>
        <h3> "Sweet sound with a pop of bass!" </h3>
        <h4>Colour: Pink</h4>
        <h4>Functionality: Adjustable mic, Wired & Wireless</h4>
        <h4>Compatability:  PS4, PS5, PC, Xbox Series X/S, Switch</h4>
        <h4>Superior studio sound with high mic sensitivity and high bass resonation giving you a vivid listening experience </h4>
        <h3>£49.99</h3>

         <!-- Form to Add Product to Basket - CHANGE FOR EVERY PRODUCT -->
         <form action="../php/products.php" method="POST">
            <input type="hidden" name="prodName" value="BUBBLEGUM BLASTER">
            <input type="hidden" name="prodPrice" value="49.99">
            <input type="number" name="prodQuant" value="1" min="1" max="10" >
            <button type="submit" name="basketAdd" class="button">Add To Basket</button>
            <a href="../reviews.html?product=BUBBLEGUM%20BLASTER&productID=11" class="button1">Write a Review</a>
          </form>
    </div>
  </div>

  <div id="reviews"></div>

  <script>

    // Function to get the star rating string (out of 5)
    function getStarRating(rating) {
        let fullStars = Math.floor(rating);  // Full stars based on the integer part of the rating
        let halfStar = (rating % 1) >= 0.5 ? 1 : 0;  // Half star if the decimal part is >= 0.5
        let emptyStars = 5 - fullStars - halfStar;  // Remaining stars to make it 5

        let starString = '';
        // Add full stars
        for (let i = 0; i < fullStars; i++) {
            starString += '★';  // Full star
        }
        // Add half star if needed
        if (halfStar) {
            starString += '☆';  // Half star
        }
        // Add empty stars
        for (let i = 0; i < emptyStars; i++) {
            starString += '☆';  // Empty star
        }
        return starString;
    }

    // Function to fetch reviews and display them
    function displayReviews(productId) {
        fetch('../php/reviewGet.php', {
            method: 'POST', 
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ productId: productId }),  // Send the productId to PHP
        })
        .then(response => response.json())
        .then(data => {
            // Handle reviews
            const reviewsContainer = document.getElementById('reviews');
            reviewsContainer.innerHTML = '';  // Clear any previous reviews

            data.reviews.forEach(review => {
                const reviewElement = document.createElement('div');

                // Get star rating for the individual review
                const starRating = getStarRating(review.Rating);

                // Add the review and stars to the review element
                reviewElement.innerHTML = `
                    <p>${starRating}</p>
                    <p>" ${review.Review} "</p>
                `;

                // Append the review element to the container
                reviewsContainer.appendChild(reviewElement);
            });

            // Handle average rating
            const averageRatingElement = document.getElementById('averageRating');
            if (averageRatingElement) {
                const averageRating = getStarRating(data.averageRating);
                averageRatingElement.innerHTML = `${averageRating}`;
            }
        })
        .catch(error => console.error('Error fetching reviews:', error));
    }

    // Call the function to fetch and display reviews for a product with ID 11
    displayReviews(11);
    
</script>




  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-section">
        <h3>G-TECH50</h3>
        <p>&copy; 2024 G-TECH50</p>
        <p>ALL RIGHTS RESERVED.</p>
      </div>
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Shop</a></li>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Contact</h3>
        <p>Phone: +44 7700 900123</p>
        <p>Email: <a href="mailto:contact@g-tech50.com">contact@g-tech50.com</a></p>
        <p>Instagram: <a href="https://instagram.com/g-tech50" target="_blank">@g-tech50</a></p>
      </div>
    </div>
  </footer>


</body>

</html>